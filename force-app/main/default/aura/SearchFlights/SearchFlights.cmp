<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId" access="global" controller="SearchFlights">
    <aura:handler name="init" value="{!this}" action="{!c.fetchFromAirports}"/>

    <!--attributes-->
    <aura:attribute name="fromAirports" type="Airport__c[]"/>
    <aura:attribute name="toAirports" type="Airport__c[]"/>
    <aura:attribute name="passengerTypes" type="String[]" default="['Adult', 'Children', 'Infant', 'Senior Citizen']"/>
    <aura:attribute name="availableFlights" type="Flight__c[]"/>
    <aura:attribute name="lastExpandedId" type="String"/>
        
    <!--card holding all the input fields & search button-->
    <lightning:card title="Search Flights" iconName="standard:search">
        
        <!--search flights button-->
        <aura:set attribute="actions">
            <lightning:button label="Search Flights" title="Neutral action" onclick="{!c.fetchFlights}"/>
        </aura:set>

        <!--input fields start here-->
        <div class="slds-grid slds-gutters" style="padding: 15px !important; margin-top: -10px !important">
            <!--From-->
            <div class="slds-col">
                <lightning:select aura:id="selectFrom" label="From" onchange="{!c.fetchToAirports}">
                    <aura:iteration items="{!v.fromAirports}" var="fromAirport">
                        <option text="{!fromAirport.Name}" value="{!fromAirport.Id}"></option>
                    </aura:iteration>
                </lightning:select>
            </div>

            <!--To-->
            <div class="slds-col">
                <lightning:select aura:id="selectTo" label="To" onchange="{!c.fetchFlights}">
                    <aura:iteration items="{!v.toAirports}" var="toAirport">
                        <option text="{!toAirport.Name}" value="{!toAirport.Id}"></option>
                    </aura:iteration>
                </lightning:select>
            </div>

            <!--Passenger Type-->
            <div class="slds-col">
                <lightning:select aura:id="selectPassengerType" label="Passenger">
                    <aura:iteration items="{!v.passengerTypes}" var="passengerType">
                        <option text="{!passengerType}" value="{!passengerType}"></option>
                    </aura:iteration>
                </lightning:select>
            </div>
        </div>

        <!--Flights start here-->

        <!--Flight Result Header-->
        <div style="padding: 15px !important">
            <p style="color:gray; font-size:large; font-weight:lighter">Departing Flight</p>
            <h1 id="routeDescription" style="font-size:large; font-weight:bold"></h1>
        </div>

        <!--list of expandable sections showing available flights-->
        <div style="padding: 15px !important; margin-top: -10px !important">
            <aura:iteration items="{!v.availableFlights}" var="availableflight">
                <div id="{!'section' + availableflight.Id}" class="slds-section">
                    <h3 class="slds-section__title">
                      <button id="{!availableflight.Id}" aria-controls="{!'content' + availableflight.Id}" aria-expanded="false" class="slds-button slds-section__title-action" onclick="{!c.sectionExpand}">
                        <span class="slds-truncate" title="Section Title">
                            <lightning:formattedDateTime class="departTime" value="{!availableflight.Depart_Time__c}" hour="2-digit" minute="2-digit"/> <span style="color:darkgrey !important">&nbsp;&nbsp; ●----{!availableflight.Duration__c}---->  &nbsp;&nbsp;</span> <lightning:formattedDateTime class="departTime" value="{!availableflight.Arrival_Time__c}" hour="2-digit" minute="2-digit"/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>{!availableflight.Name}</span>
                        </span>
                      </button>
                    </h3>
                    <div id="{!'content' + availableflight.Id}" aria-hidden="true" class="slds-section__content">
                      <p>Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                        Nullam quis risus eget urna mollis ornare vel eu leo. Nulla vitae elit libero, a pharetra augue.</p>
                    </div>
                  </div>
            </aura:iteration>
        </div>

    </lightning:card>

    


</aura:component>	
